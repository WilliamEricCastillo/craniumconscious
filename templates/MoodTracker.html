<!DOCTYPE html>
<html lang="eng">
<head>
  <meta charset="UTF-8">
  <title>Mood Tracker</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="../assets/css/NavBarStyle.css">

  <style>
    * {
      font-family: Arial, sans-serif;
    }

    body {

      padding: 6em 0 6em 0;
      background-color: #4686a0;
      color: rgba(255, 255, 255, 0.75);
      background-attachment: fixed, fixed, fixed;
      background-image: url(../assets/css/images/overlay2.png), url(../assets/css/images/overlay3.svg),linear-gradient(45deg, #9dc66b 5%, #4fa49a 30%, #4361c2);

      background-position:
              top left,
              center center,
              center center;
      background-size:
              auto,
              cover,
              cover;

    }

    h1, h3 ,#submit-button {
    text-align: center;

  }

    form {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 30px;
      text-align: center;
    }


  fieldset {
    border: none;
    white-space: nowrap;
  }

  input[type="radio"] {
    display: none;
  }

    label {
      display: inline;
      width: 100px;
      height: 70px;
      margin: 10px;
      font-size: 40px;
      text-align: center;
      cursor: pointer;
      border-radius: 100%;
      border: 3px solid #ccc;
      transition: all 0.3s ease-in-out;
    }

  label:hover {
    border-color: #4070f4;
  }

  input[type="radio"]:checked + label {
    border-color: #007bff;
  }

  button {
    margin-top: 20px;
    padding: 10px 20px;
    font-size: 20px;
    background-color: #007bff;
    color: #fff;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.3s ease-in-out;
  }

  button:hover {
    background-color: #0056b3;
  }

  canvas {
    margin-top: 30px;
    border: 1px solid #ccc;
    background-color: rgba(255, 255, 255, 0.6);
  }

  #graph-style{
    width: 70%;
    margin: auto;
  }

    .radio-group {
      display: inline-block;
      vertical-align: middle;
    }

    .radio-value {
      margin-top: 10px;
      font-size: 16px;
      text-align: center;
    }

    #formdiv {
      background-color: rgba(0, 0, 0, 0.5);
      margin-left: 10%;
      margin-right: 10%;
      min-width: 80%;
      display: inline-block;
      border-radius: 10px;
    }

    #formdiv::before, #formdiv::after {
      content: "";
      display: table;
    }

    #formdiv::after {
      clear: both;
    }



  </style>
</head>
<body>

    <nav>
      <div class="nav-content">
        <div class="logo">
					<a href="{{ url_for('index') }}">Cranium Conscious</a>
				</div>
				<ul class="nav-links">
					<li><a href="{{ url_for('home') }}">Home</a></li>
					<li><a href="{{ url_for('gad') }}">GAD7</a></li>
					<li><a href="{{ url_for('phq') }}">PHQ9</a></li>
					<li><a href="{{ url_for('journal') }}">Journal</a></li>
					<li><a href="{{ url_for('todo') }}">ToDo</a></li>
					<li><a href="{{ url_for('moodtracker') }}">MoodTracker</a></li>
					<li><a href="{{ url_for('mindfulactivites') }}">MindfulActivities</a></li>
					<li><a href="{{ url_for('poetry') }}">Poetry</a></li>
					<li><a href="{{ url_for('quotes') }}">Quotes</a></li>
					<li><a href="{{ url_for('crisis') }}">CrisisSupport</a></li>
				</ul>
      </div>
    </nav>

<h1 >Mood Tracker</h1>
    <br>
<div id="formdiv">
  <br>
  <h3>How are you feeling today?</h3>

  <form method="post" action="/submit-mood">
      <fieldset>
        <div class="radio-group">
          <input type="radio" id="emoji1" name="mood" value="0">
          <label for="emoji1"><img src="../images/icons8-in-love-96.png" alt="Happy"></label>
          <div class="radio-value">Value 4</div>
        </div>
        <div class="radio-group">
          <input type="radio" id="emoji2" name="mood" value="1">
          <label for="emoji2"><img src="../images/icons8-smiling-96.png" alt="In Love"></label>
          <div class="radio-value">Value 3</div>
        </div>
        <div class="radio-group">
          <input type="radio" id="emoji3" name="mood" value="2">
          <label for="emoji3"><img src="../images/icons8-neutral-96.png" alt="Neutral"></label>
          <div class="radio-value">Value 2</div>
        </div>
        <div class="radio-group">
          <input type="radio" id="emoji4" name="mood" value="3">
          <label for="emoji4"><img src="../images/icons8-frowning-face-96.png" alt="Sad"></label>
          <div class="radio-value">Value 1</div>
        </div>
        <div class="radio-group">
          <input type="radio" id="emoji5" name="mood" value="4">
          <label for="emoji5"><img src="../images/icons8-angry-96.png" alt="Angry"></label>
          <div class="radio-value">Value 0</div>
        </div>
        <br>
        <button type="button" id="submit-button">Submit</button>
      </fieldset>

  <div id="graph-style">
    <canvas id="chart"></canvas>
  </div>
</form>
</div>

<script>

  // Get the chart canvas and initialize the Chart object
  const chartCanvas = document.getElementById('chart');
  const moodChart = new Chart(chartCanvas, {
    type: 'line',
    data: {
      labels: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
      datasets: [{
        label: 'Mood',
        data: [1,2,2,4,1,3,4],
        borderColor: 'black',
        backgroundColor: '#007bff',
        fill: false,
        pointBackgroundColor: ['#007bff', '#28a745', '#ffc107', '#dc3545', '#red', '#343a40', '#17a2b8'],
        pointBorderColor: ['#fff', '#fff', '#fff', '#fff', '#fff', '#fff', '#fff']
      }]

    },
    options: {
      responsive: true,
      title: {
        display: true,
        text: 'Mood Tracker'
      },
      scales: {
        yAxes: [{
          ticks: {
            beginAtZero: true,
            max: 4,
            stepSize: 1,
            callback: function(value) {
              switch (value) {
                case 0:
                  return {text: '&#x1F621;', color: 'red'};
                case 1:
                  return {text: '&#x1F622;', color: 'orange'};
                case 2:
                  return {text: '&#x1F610;', color: 'yellow'};
                case 3:
                  return {text: '&#x1F60D;', color: 'lightgreen'};
                case 4:
                  return {text: '&#x1F60E;', color: 'green'};
                default:
                  return '';
              }
            }
          },
          scaleLabel: {
            display: true,
            labelString: 'Mood'
          }
        }],
        xAxes: [{
          scaleLabel: {
            display: true,
            labelString: 'Day of the week'
          }
        }]
      }
    }
  });


  // Add an event listener to the Submit button
  const submitButton = document.getElementById('submit-button');
  submitButton.addEventListener('click', function(event) {
    event.preventDefault();
    const moodRadios = document.getElementsByName('mood');
    let moodValue;
    for (let i = 0; i < moodRadios.length; i++) {
      if (moodRadios[i].checked) {
        moodValue = moodRadios[i].value;
        break;
      }
    }
    if (moodValue) {
      const currentDate = new Date();
      const currentDayOfWeek = currentDate.getDay();
      moodChart.data.datasets[0].data[currentDayOfWeek] = [4, 3, 2, 1, 0].indexOf(parseInt(moodValue));
      moodChart.update();
    }
  });


</script>

</body>
</html>









